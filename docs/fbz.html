<!DOCTYPE html>
<html>
    <head>
        <title>( ͡° ͜ʖ ͡°)</title>
        <meta name=viewport content="width=device-width, initial-scale=1">
        <meta name=viewport content="width=device-width, initial-scale=1">
        <link rel=stylesheet href=//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.css>
        <link rel=stylesheet media=print href=/css/print.css>
        <link rel=stylesheet media=screen href=/css/screen.css>
        <link rel=stylesheet href=/css/readable.css>
        <link rel=stylesheet href=//cdn.jsdelivr.net/highlight.js/9.1.0/styles/github.min.css>
        <script type=module src=/js/dark-toggle.js></script>
        <script type=module src=/js/sw-register.js></script>
    </head>
    <body>
        <header>
            <nav>
                <a href=/ >home</a>
                <a href=https://github.com/qwelias/qwelias.github.io>source</a>
            </nav>
            <nav>
                <a href=https://github.com/qwelias>github</a>
            </nav>
        </header>
        <form>
            <input type=password required autofocus>
            <button>( ͡° ͜ʖ ͡°)</button>
        </form>
        <form>
            <input type=password required>
            <button>( ͡° ͜ʖ ͡°)</button>
        </form>
        <form>
            <input type=password required>
            <button>( ͡° ͜ʖ ͡°)</button>
        </form>
        <form>
            <input type=password required>
            <button>( ͡° ͜ʖ ͡°)</button>
        </form>
        <script>
            'use strict'

            document.addEventListener('click', ev => {
                if (ev.target.tagName === 'INPUT') return
                // mobile kb
                document.querySelector('input').focus()
            })

            const makeFbz = (a, l = 13*2, pr = '', po = '') => {
                const foo = str => BigInt([...str].map(c => c.charCodeAt()).join(''))
                const bar = strs => strs.reduce((h, s, p) => h + foo(s) ** BigInt(strs.length - p + 1), 0n)
                const baz = ins => {
                    let h = String(bar(ins.map(String)))
                    while (h.length > l) h = String(BigInt(h.slice(0, l)) ^ BigInt(h.slice(l)))

                    const hh = [...h]
                    let r = ''
                    while (hh.length) {
                        const n = Number(hh.splice(0, 2).join(''))
                        r += String.fromCharCode(a[n % a.length])
                    }
                    return r
                }

                return i => pr + baz(i.split(' ')) + po
            }

            const a = [
                [
                    [45, 46, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 63, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 95, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122],
                    18*2,
                    '_'
                ],
                [
                    [33, 36, 38, 42, 43, 45, 46, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 95, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122],
                    18*2,
                ],
                [
                    [33, 36, 38, 42, 43, 45, 46, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 95, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122],
                    13*2,
                ],
                [
                    [100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 33, 35, 36, 37, 38, 42, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 94, 97, 98, 99],
                    13*2,
                ],
            ]

            Array.from(document.querySelectorAll('form')).map((form, i) => {
                const fbz = makeFbz(...a[i])

                form.addEventListener('submit', e => {
                    e.preventDefault()

                    const inp = e.target.elements[0]
                    navigator.clipboard.writeText(fbz(inp.value))
                    inp.value = ''
                }, true)
            })
        </script>
    </body>
</html>
